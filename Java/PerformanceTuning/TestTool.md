## 操作系统工具

### 工具包
#### Unix
- sar
- vmstat
- iostat
- prstat
- netstat
- nicstat
#### Windows
- 图形化资源监视器
- typeperf

### 监控信息
- CPU使用率（让CPU的使用率尽可能的高）
	- `用户态`时间
	- `系统态`时间，任何使用底层系统资源的操作，都会占用`系统态`时间
> 注意：
> -  `CUP队列`的情况，一般试图运行的线程数超过了可用的CPU,性能就会下降
> -  检查应用性能时，首先应该审查CPU时间
> -  优化代码的目的是提升而不是降低CPU的使用率
> -  在试图深入优化应用前，应该先弄清楚为何CPU使用率低
- 内存使用率
- 磁盘使用率
	- 与应用相关，如果应用正在做大量的`磁盘I/O`操作,那么I/O容易成为瓶颈
	- 没有有效的缓冲，磁盘I/O会`非常低`
	- 超过了磁盘的承载，磁盘I/O会`非常高`
	- 有助于监控系统是否在进行`内存交换`（即从主内存移动数据到磁盘或者反过来）
		- 进行`内存交换`的系统，一般来说性能比较差
> - 即使不直接写磁盘的应用，系统交换任然会影响他们的性能
> - 写入磁盘应用的瓶颈，要么是因为写入的效率太低（吞吐量太低），要么是因为写入太多的数据（吞吐量太高）
- 网络使用率
	- 没有充分利用网络，所以`带宽`很低
	- 过度使用，写入网络接口的总数据量超过了它所处理的量，`带宽不足`
>  - 对于本地的以太网来说，使用率超过40%就意味着饱和
>  - 对基于网络的应用，务必要监控网络是不是它的瓶颈
>  - 网络的瓶颈，可能是写数据效率太低（吞吐量太低），或者写入太多的数据（吞吐量太高）


## Java监控工具
- jcmd，打印Java进程所涉及的`基本类、线程和VM信息`，可用于`脚本`
- jconsole，提供JVM活动的图形化试图，包括`线程的使用、类的使用、GC活动`
- jhat，读取`内存堆转储`，用于`事后分析`
- jmap，提供`堆转储和其他JVM使用信息`，可用于`脚本`,`堆转储`必须在`事后分析工具`中使用
- jinfo，查看`JVM系统属性`，可以`动态设置`一些系统属性，可用于`脚本`
> 只能修改标记为manageable的标志
- jstack，转储Java进程的`栈信息`，可用于`脚本`
- jvisualvm，监视JVM的`GUI工具`，可用来`剖析运行的应用`，`分析JVM堆转储`

### 可观测的领域
- 基本的VM信息
	- 运行时间
	- 系统属性
	- JVM版本
	- JVM命令行
	- JVM调优标志
		> 值`:=`表示没有使用默认值，值`=`表示使用的默认值
		> 导致标志不使用默认值的情况：
		> - 标志值直接在命令行指定
		> - 其他标志简介改变了该标志
		> - JVM自动优化计算出来的默认值
- 线程信息
- 类信息
- 实时GC分析
- 堆转储的事后处理
- JVM的性能分析